---
layout: default
---

<!-- Load visualization stuff -->
 
<script type="text/javascript" src="../js/vis.js"></script>
<script type="text/javascript" src="../js/underscore.js"></script>
<script type="text/javascript" src="../js/palette.js"></script>
<link href="../css/vis.css" rel="stylesheet" type="text/css" />
<style type="text/css">
    #mynetwork {
      width: 100%;
      height: 800px;
      border: 1px solid lightgray;
    }
</style>

<!-- Load course info -->

<script>  // Dynamically import a module
function loadScript(url) {
  const script = document.createElement('script');
  script.src = url;
  script.type = 'text/javascript';
  script.onload = () => console.log(`${url} loaded successfully.`);
  script.onerror = () => console.error(`Failed to load script: ${url}`);
  document.head.appendChild(script);
}

// Example usage
loadScript('https://dport96.github.io/ITM683/module-info.js');
// loadScript('https://uhm-itm.github.io/BUS619/module-info.js');
// loadScript('https://descartes.manoa.hawaii.edu/MGT650/module-info.js');
// loadScript('https://descartes.manoa.hawaii.edu/ee445/module-info.js');
</script>



<!-- <script>
  try {
    import('https://uhm-itm.github.io/BUS619/module-info.js');
  } catch (error) {
    console.error('Failed to load the module:', error);
  }
</script>

<script>
  try {
    import('https://descartes.manoa.hawaii.edu/MGT650/module-info.js');
  } catch (error) {
    console.error('Failed to load the module:', error);
  }
</script>

<script>
  try {
    import('https://descartes.manoa.hawaii.edu/ee445/module-info.js');
  } catch (error) {
    console.error('Failed to load the module:', error);
  }
</script> -->

{% if page.topdiv == 'container' %}
<div class="container">
  {{ content }}
</div>
{% else %}
  {{ content }}
{% endif %}

<div id="mynetwork"></div>


<script>
// Helper to load scripts sequentially and run callback when all are loaded
function loadScriptsSequentially(urls, callback) {
  let i = 0;
  function next() {
    if (i < urls.length) {
      const script = document.createElement('script');
      script.src = urls[i];
      script.type = 'text/javascript';
      script.onload = function() {
        i++;
        next();
      };
      script.onerror = function() {
        console.error('Failed to load script: ' + urls[i]);
        i++;
        next();
      };
      document.head.appendChild(script);
    } else {
      callback();
    }
  }
  next();
}

const courseScriptUrls = [
  'https://dport96.github.io/ITM683/module-info.js'//,
  // 'https://uhm-itm.github.io/BUS619/module-info.js',
  // 'https://descartes.manoa.hawaii.edu/MGT650/module-info.js',
  // 'https://descartes.manoa.hawaii.edu/ee445/module-info.js'
];

loadScriptsSequentially(courseScriptUrls, function() {
  var numCourses = 4; // update this each time you add a new course.
  var courseColors = palette('tol', numCourses);
  var moduleNodes = [];
  var moduleEdges = [];

  var processCourse = function(course, nodes, edges, color) {
    var numModules = course.modules.length;
    for (i = 0; i < numModules; i++) {
      var node = {};
      var module = course.modules[i];
      node.id = module.moduleUrl;
      node.label = module.course + ": " + module.title;
      node.color = '#' + color;
      node.shape = 'box';
      node.title = module.description;
      nodes.push(node);
      if (i < (numModules - 1)) {
        var edge = {};
        edge.from = module.moduleUrl;
        edge.to = course.modules[i + 1].moduleUrl;
        edges.push(edge);
      }
    }
    _.each(course.prerequisites, function (prereq) {
      var edge = {};
      edge.from = prereq.moduleUrl;
      edge.to = prereq.prerequisiteUrl;
      edges.push(edge);
    });
  };

  processCourse(itm683, moduleNodes, moduleEdges, courseColors[0]);
  // processCourse(bus619, moduleNodes, moduleEdges, courseColors[1]);
  // processCourse(mgt650, moduleNodes, moduleEdges, courseColors[2]);
  // processCourse(ee445, moduleNodes, moduleEdges, courseColors[3]);

  var container = document.getElementById('mynetwork');
  var data = {
    nodes: moduleNodes,
    edges: moduleEdges
  };
  var options = {
    layout: { randomSeed: 2},
    nodes: { font: { color: 'white' } },
    physics: {stabilization: true}
  };
  var network = new vis.Network(container, data, options);
  network.on("doubleClick", function (params) {
    if (params['nodes'].length > 0) {
      window.open(params['nodes'][0]);
    }
  });
});
</script>
